function e(e){return new Promise((n,i)=>{const a=document.createElement("script");a.src=e,a.onload=n,a.onerror=i,document.head.appendChild(a)})}function n(){const e=navigator.userAgent.toLowerCase();return window.TelegramWebviewProxy||e.includes("telegram")?"telegram":e.includes("eitaa")||e.includes("eitaaw")?"eitaa":"unknown"}async function i(){const i=n();if("unknown"===i)return{host:i,initialized:!1,webApp:null};try{if("telegram"===i){if(await e("/telegram-web-app.js"),await new Promise(e=>setTimeout(e,100)),window.Telegram?.WebApp)return window.Telegram.WebApp.expand(),window.Telegram.WebApp.enableClosingConfirmation(),window.Telegram.WebApp.setHeaderColor&&window.Telegram.WebApp.setHeaderColor("#f5f5f5"),window.Telegram.WebApp.setBackgroundColor&&window.Telegram.WebApp.setBackgroundColor("#f5f5f5"),{host:i,initialized:!0,webApp:window.Telegram.WebApp}}else if("eitaa"===i&&(await e("https://developer.eitaa.com/eitaa-web-app.js"),await new Promise(e=>setTimeout(e,100)),window.Eitaa?.WebApp))return"function"==typeof window.Eitaa.WebApp.expand&&window.Eitaa.WebApp.expand(),"function"==typeof window.Eitaa.WebApp.setBackgroundColor&&window.Eitaa.WebApp.setBackgroundColor("#f5f5f5"),{host:i,initialized:!0,webApp:window.Eitaa.WebApp};return{host:i,initialized:!1,webApp:null}}catch(a){return console.error(a),{host:i,initialized:!1,webApp:null}}}export{n as detectMiniAppHost,i as initMiniApp,e as loadScript};
